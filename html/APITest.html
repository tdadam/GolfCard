<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Simple markers</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #map {
            height: 50%;
            width: 100%;

        }
    </style>
</head>
<body>

<div id="map"></div>
<div id="demo"></div>
<button onclick="hole(1)">Click here to test</button>

<script>
    var clientID = "64f8ab8b-326b-4b4c-9d5f-10b4abf65d9c";
    var accessToken, model, map;
        var redirectURI = document.URL;
        var authUrl = "https://api.swingbyswing.com/v2/oauth/authorize?scope=read&redirect_uri=" + encodeURI(redirectURI) + "&response_type=token&client_id=" + clientID;
        accessToken = getUrlVars().access_token;
        if (accessToken == null) {
            location.replace(authUrl);
        }
        else {
            accessToken = accessToken.replace("\n", "");
            getCourse(47500);

        }

    function getUrlVars() {
        var vars = {};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,
        function (m, key, value) {
            vars[key] = value;
        });
        return vars;
    }

//    https://api.swingbyswing.com/v2/courses/18300?includes=practice_area,nearby_courses,recent_media,recent_comments,recent_rounds,best_rounds,current_rounds,course_stats_month,course_stats_year&access_token={access_token}
//https://api.swingbyswing.com/v2/courses/" + courseID + "?includes=practice_area&access_token=" + accessToken
    function Map() {
        this.showLocation();
        {

        }
    }
    function getCourse(courseID) {
        var xhttp = new XMLHttpRequest();
        var aRequest = "https://api.swingbyswing.com/v2/courses/" + courseID + "?includes=practice_area&access_token=" + accessToken;
        xhttp.onreadystatechange = function() {
            if (xhttp.readyState == 4 && xhttp.status == 200) {
                model = JSON.parse(xhttp.responseText);
                var location = {lat: 43.663415, lng: -89.780945};
                initMap(location);
            }
        };
        xhttp.open("GET", aRequest, true);
        xhttp.send();
    }

    function initMap(myLatLng) {
        console.log(myLatLng);
        map = new google.maps.Map(document.getElementById('map'), {
            zoom: 15,
            center: myLatLng,
            mapTypeId: google.maps.MapTypeId.SATELLITE,
            scrollwheel: false,
                    disableDefaultUI: true
            // set bounds and center on fairway
        });

        var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,
            title: "Cold Water Canyon"
        });
    }

     function hole(hn) {
        var green = model.course.holes[hn - 1].green_location;
        var tee = model.course.holes[hn - 1].tee_boxes[0].location;
        var lati = (green.lat + tee.lat) / 2;
         console.log(lati);
        var long = (green.lng + tee.lng) / 2;
         console.log(long);
        var fairway = {"lat": lati, "lng": long};
         console.log(fairway);
        map = new google.maps.Map(document.getElementById('map'), {
            center: fairway,
            zoom: 16,
            mapTypeId: google.maps.MapTypeId.SATELLITE,
            scrollwheel: false,
            disableDefaultUI: true
        });

         var markTee = new google.maps.Marker({
             position: tee,
             map: map,
             title: "Tee Box"
         });

         var markGreen = new google.maps.Marker({
            position: green,
             map: map,
             title: "Green"
         });

//         var bounds =
    }


//    function check(hn) {
//        var green = model.course.holes[hn - 1].green_location;
//        console.log(green);
//
//        var tee = model.course.holes[hn - 1].tee_boxes[0].location;
//        console.log(tee);
//    }
</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC7O4oZYHZ-CabyadZSFAr8gIAI1f5F_UY&signed_in=true&callback=initMap"></script>
</body>
</html>